## Simple Callback Pattern

### Overview

A **1:1, one-shot** notification system. Only meaningful when the operation is asynchronous. The module performs work over time (multiple `task()` calls), and triggers a single callback when the operation finishes.

**Implementation:** See `companion_code/ch3_patterns/include/canvas.h` and `src/canvas.c`

#### Module API

```c
// Canvas module implements simple callback pattern
void canvas_init(const canvas_config_t *config);
void canvas_moveShape(api_shape_t *shape, int16_t target_x, int16_t target_y);
void canvas_task(void);
```

**Callback signature:**
```c
typedef void (*canvas_moveCallback_t)(api_shape_t *shape, void *context);
```

#### Key Features

- **1:1 relationship** - One callback per module
- **One-shot** - Fires exactly once when movement completes  
- **Asynchronous** - Works with task-based systems
- **Fire-and-forget** - Can be NULL for no callback needed

#### Task Implementation

```c
void canvas_task() {
    for each moving shape:
        update position gradually
        if (movement_finished) {
            callback(context);  // Fire once
        }
}
```

### Usage Example

```c
canvas_config_t config = {};
config.moveCallback = onMovementComplete;
config.moveContext = &myData;
canvas_init(&config);

canvas_moveShape(shape, 100, 50);  // Start moving
// ... call canvas_task() periodically ...
// onMovementComplete fires once when shape arrives
```

### Important Notes

- **MUST be asynchronous** to be meaningful
- Fires callback exactly **once**
- Good for one-shot completion:
  - Motor movement done
  - ADC conversion done
  - Transfer complete

**Status:** âœ… Implemented and tested. See canvas module in companion code.
