## Inheritance Pattern

### Overview

Inheritance in C is implemented by placing a base struct as the **FIRST member** of a derived struct. This guarantees that the address of the derived object equals the address of its base part, enabling safe upcasting (derived → base) and downcasting (base → derived). This allows sharing common fields and building polymorphic behaviors.

### Implementation

#### Base Structure

```c
typedef struct {
    uint32_t color;
    uint8_t visible;
    shape_type_t type;
} shape_t;
```

#### Derived Structures

```c
typedef struct {
    shape_t base;        // MUST be first
    rectangle_t rect;    // specific object
} shape_rectangle_t;

typedef struct {
    shape_t base;
    circle_memory_t mem;
    hCircle_t circle;
} shape_circle_t;

typedef struct {
    shape_t base;
    triangle_t triangle;
} shape_triangle_t;
```

### Important Notes

- **Initialize base first**, then the specific object
- This pattern allows storing all shapes as `(shape_t*)` for generic processing
- Opaque pattern becomes awkward here because extra memory blobs and handles clutter derived structs, which reveals why **private pattern fits inheritance better**
